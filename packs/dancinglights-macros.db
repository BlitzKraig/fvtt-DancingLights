{"_id":"2c0UIHNkivjQlnDH","name":"Turn Off Selected Lights/Token Lights","permission":{"default":0,"X23601767wRl9DRa":3},"type":"chat","flags":{},"scope":"global","command":"/*\r\nPart of Dancing Lights by Blitz\r\n\r\nThis macro will turn set selected lights or selected tokens lights off.\r\nNote that the Dancing Lights module MUST be enabled for this to work,\r\nHowever, the light itself does not need to have dancing lights enabled\r\n--\r\nA token should have its light radii set up before turning it off, or nothing will happen\r\n*/\r\n\r\nlet lightsArray = []\r\nlet tokensArray = []\r\nfor (let light of canvas.lighting.controlled) {\r\n    light.data.flags.world.dancingLights.hidden = true;\r\n    lightsArray.push(light.data);\r\n}\r\n\r\nfor (let token of canvas.tokens.controlled) {\r\n    token.data.flags.world.dancingLights.hidden = true;\r\n    tokensArray.push(token.data);\r\n}\r\n\r\ncanvas.lighting.updateMany(lightsArray, {\r\n    diff: false\r\n})\r\ncanvas.tokens.updateMany(tokensArray, {\r\n    diff: false\r\n})","author":"X23601767wRl9DRa","img":"modules/DancingLights/icons/torch-off.png","actorIds":[]}
{"_id":"8dhhwthutZwHrsr5","name":"Paste DancingLights Settings to Selected","permission":{"default":0,"X23601767wRl9DRa":3},"type":"script","flags":{},"scope":"global","command":"/*\r\nPart of Dancing Lights by Blitz\r\n\r\nThis macro will paste saved Dancing Lights lighting data (using the Copy macro) to all selected lights or tokens.\r\nThis will only affect Dancing Lights settings, not the base light settings.\r\nNote that the Dancing Lights module MUST be enabled for this to work.\r\n*/\r\n\r\nlet dancingLightsPasteSettings = () => {\r\n    let dancingLightsOptions;\r\n    dancingLightsOptions = game.settings.get(\"DancingLights\", \"savedLightSettings\");\r\n    if (!dancingLightsOptions) {\r\n        ui.notifications.warn(\"No settings copied. Please use the Copy macro first.\");\r\n    }\r\n    if (canvas.lighting.controlled.length > 0) {\r\n        let lightsArray = []\r\n        for (let light of canvas.lighting.controlled) {\r\n            light.data.flags.world.dancingLights = dancingLightsOptions;\r\n            lightsArray.push(light.data);\r\n        }\r\n        canvas.lighting.updateMany(lightsArray, {\r\n            diff: false\r\n        });\r\n    } else if (canvas.tokens.controlled.length > 0) {\r\n        let tokensArray = [];\r\n        for (let token of canvas.tokens.controlled) {\r\n            token.data.flags.world.dancingLights = dancingLightsOptions;\r\n            tokensArray.push(token.data);\r\n        }\r\n        canvas.tokens.updateMany(tokensArray, {\r\n            diff: false\r\n        });\r\n    } else {\r\n        ui.notifications.warn(\"Please select 1 or more lights or tokens\");\r\n        return;\r\n    }\r\n    game.settings.set(\"DancingLights\", \"savedLightSettings\", dancingLightsOptions);\r\n\r\n};\r\ndancingLightsPasteSettings();","author":"X23601767wRl9DRa","img":"modules/DancingLights/icons/load.png","actorIds":[]}
{"_id":"mh2P35CzqWrIb7p0","name":"Turn On Selected Lights/Token Lights","permission":{"default":0,"X23601767wRl9DRa":3},"type":"script","flags":{},"scope":"global","command":"/*\r\nPart of Dancing Lights by Blitz\r\n\r\nThis macro will turn set selected lights or selected tokens lights on.\r\nNote that the Dancing Lights module MUST be enabled for this to work,\r\nHowever, the light itself does not need to have dancing lights enabled\r\n--\r\nA token should have its light radii set up before turning it on, or nothing will happen\r\n*/\r\n\r\nlet lightsArray = []\r\nlet tokensArray = []\r\nfor (let light of canvas.lighting.controlled) {\r\n    light.data.flags.world.dancingLights.hidden = false;\r\n    lightsArray.push(light.data);\r\n}\r\n\r\nfor (let token of canvas.tokens.controlled) {\r\n    token.data.flags.world.dancingLights.hidden = false;\r\n    tokensArray.push(token.data);\r\n}\r\n\r\ncanvas.lighting.updateMany(lightsArray, {\r\n    diff: false\r\n})\r\ncanvas.tokens.updateMany(tokensArray, {\r\n    diff: false\r\n})","author":"X23601767wRl9DRa","img":"modules/DancingLights/icons/torch-on.png","actorIds":[]}
{"_id":"rLo9o3y5fAJHjw4s","name":"Toggle Selected Lights/Token Lights","permission":{"default":0,"X23601767wRl9DRa":3},"type":"script","flags":{},"scope":"global","command":"/*\r\nPart of Dancing Lights by Blitz\r\n\r\nThis macro will toggle selected lights or selected tokens lights on/off.\r\nNote that the Dancing Lights module MUST be enabled for this to work,\r\nHowever, the light itself does not need to have dancing lights enabled\r\n--\r\nA token should have its light radii set up before enabling/disabling, or nothing will happen\r\n*/\r\n\r\nlet lightsArray = []\r\nlet tokensArray = []\r\nfor (let light of canvas.lighting.controlled) {\r\n    let hide = light.data.flags.world.dancingLights.hidden ?? false;\r\n    light.data.flags.world.dancingLights.hidden = !hide;\r\n    lightsArray.push(light.data);\r\n}\r\n\r\nfor (let token of canvas.tokens.controlled) {\r\n    let hide = token?.data?.flags?.world?.dancingLights?.hidden ?? false;\r\n    token.data.flags.world.dancingLights.hidden = !hide;\r\n    tokensArray.push(token.data);\r\n}\r\n\r\ncanvas.lighting.updateMany(lightsArray, {\r\n    diff: false\r\n})\r\ncanvas.tokens.updateMany(tokensArray, {\r\n    diff: false\r\n})","author":"X23601767wRl9DRa","img":"modules/DancingLights/icons/lever.png","actorIds":[]}
{"_id":"tgJfYdhfRIIuZtQr","name":"Copy DancingLights Settings","permission":{"default":0,"X23601767wRl9DRa":3},"type":"script","flags":{},"scope":"global","command":"/*\r\nPart of Dancing Lights by Blitz\r\n\r\nThis macro will copy Dancing Lights lighting data from a single light or token, and save it to the Dancing Lights game settings.\r\nThe Paste module can then be used to paste this data.\r\nThis will only affect Dancing Lights settings, not the base light settings.\r\nNote that the Dancing Lights module MUST be enabled for this to work.\r\n*/\r\n\r\nlet dancingLightsCopySettings = () => {\r\n    let dancingLightsOptions;\r\n    if (canvas.lighting.controlled.length === 1) {\r\n        dancingLightsOptions = canvas.lighting.controlled[0].data.flags.world.dancingLights;\r\n        ui.notifications.notify(\"Ambient Light settings copied\");\r\n    } else if (canvas.tokens.controlled.length === 1) {\r\n        ui.notifications.notify(\"Token Light settings copied\");\r\n        dancingLightsOptions = canvas.tokens.controlled[0].data.flags.world.dancingLights;\r\n    } else {\r\n        ui.notifications.warn(\"Please select a single light or token\");\r\n        return;\r\n    }\r\n    game.settings.set(\"DancingLights\", \"savedLightSettings\", dancingLightsOptions);\r\n\r\n};\r\ndancingLightsCopySettings();","author":"X23601767wRl9DRa","img":"modules/DancingLights/icons/save.png","actorIds":[]}
{"_id":"2c0UIHNkivjQlnDH","name":"Turn Off Selected Lights/Token Lights","permission":{"default":0,"X23601767wRl9DRa":3},"type":"script","flags":{},"scope":"global","command":"/*\r\nPart of Dancing Lights by Blitz\r\n\r\nThis macro will turn set selected lights or selected tokens lights off.\r\nNote that the Dancing Lights module MUST be enabled for this to work,\r\nHowever, the light itself does not need to have dancing lights enabled\r\n--\r\nA token should have its light radii set up before turning it off, or nothing will happen\r\n*/\r\n\r\nlet lightsArray = []\r\nlet tokensArray = []\r\nfor (let light of canvas.lighting.controlled) {\r\n    light.data.flags.world.dancingLights.hidden = true;\r\n    lightsArray.push(light.data);\r\n}\r\n\r\nfor (let token of canvas.tokens.controlled) {\r\n    token.data.flags.world.dancingLights.hidden = true;\r\n    tokensArray.push(token.data);\r\n}\r\n\r\ncanvas.lighting.updateMany(lightsArray, {\r\n    diff: false\r\n})\r\ncanvas.tokens.updateMany(tokensArray, {\r\n    diff: false\r\n})","author":"X23601767wRl9DRa","img":"modules/DancingLights/icons/torch-off.png","actorIds":[]}
